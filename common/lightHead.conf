#
# This file is an example configuration file for the lightHead-bot system.
#

#  If you experience a crash (ie: an Exception), you can investigate the reasons
# setting VERBOSITY to DEBUG, spawning then the convenient python debugger.
VERBOSITY = 2      # 0: WARNING, 1: INFO, 2: DEBUG    (default is 0)

################################################################################
# Network Connections
################################################################################

#  LightHead is our RAS (Robotic Animation System), providing generic animation
# features abstracting hardware design.
#lightHead_server = ('','/tmp/lightHead')	# using UNIX socket
lightHead_server = ('localhost', 31337)         # using loopback TCP interface
#lightHead_server = ('vboxnet0', 31337)		# using VirtualBox Linux

#  Expression is our EAS (Expressive Animation System), providing high-level
# animation features abstracting character indentity and fusing low-level data
# for the RAS.
#expression_server = ('', '/tmp/expression')    # expression server address,port
expression_server = ('localhost', 4242)         # expression server address,port

################################################################################
# Robot configuration
################################################################################

#  Hardware configuration is defined by the ROBOT dictionnary.
# This config file show how to hold multiple robot configurations so to easily
# switch from one to another. e.g: for testing or on hardware failure..
#
#  Some entries refer to the lib_.. entries defined in the hardware library (in
# this file).

BLENDER_PROJ = (				# projection matrix
  ( 5. ,  .25,  0.,  .7),
  ( -.3, 9.40,  0., 1.9),
  ( -.1, 0.  , -.1, -.2),
  ( -.1, 0.  , -1 , 5. ) 
)

ROBOT_LIGHTHEAD_SOFT_NOVISION = {
  'name'      : 'lightHead',
  'mod_face'  : {
    'backend'       : 'blender',
    'blender_proj'  : BLENDER_PROJ,
    'extra_origins' : ('gaze','lips','spine'),	# entry used for registering more protocol keywords for a subserver/handler
    'comm'          : ('localhost', 4242)	# for the standalone face server
               },
  'mod_vision': None,
  'mod_spine' : None,
}

ROBOT_LIGHTHEAD_HARD = {
  'name'      : 'lightHead',
  'mod_face'  : {
    'backend'       : 'blender',
    'blender_proj'  : BLENDER_PROJ,
    'extra_origins' : ('gaze','lips'),		# entry used for registering more protocol keywords for a subserver/handler
    'comm'          : ('localhost', 4242)	# standalone server info
		},
  'mod_vision': {
     'sensor'       : 'laptop_camera',
     'remote'       : ('my_host_connected_to_the_robot_camera', 4244),
     'haar_cascade' : 'your_own_file_path',
      	  	},
  'mod_spine' : {
    'backend'       : 'katHD400s_6M',
    'hardware_addr' : '192.168.168.232',	# the robot arm IP address
    'comm'          : ('localhost', 4243),	# standalone server info
		}
}
ROBOT = ROBOT_LIGHTHEAD_HARD
#ROBOT = ROBOT_LIGHTHEAD_SOFT_NOVISION

################################################################################
# Hardware library
################################################################################

lib_vision = {
  'laptop_camera' : {
	       'dev_index': 0,
	       'factors': (.5, .1, .2),
	       'resolution': (320,240) }
}

lib_spine = {
		# floats are normalized angles
  'katHD400s_6M': {	# THIS SECTION IS *ONLY* FOR THE KATANA ARM HD400s_6M

		'AXIS_LIMITS' : {			# software axis range
         	 	'TX'  :(-.2 ,  .1 ),
         	 	'TZ'  :(-.5 ,  .5 ),
         	 	'53.5':(-.5 ,  .12),
         	 	'55.5':(-.25,  .25),
         	 	'51.5':(-.4 ,  .4, True),	# extra: inversed rot.
			},
		 # switch_off pose, absolute encoder values
		'POSE_REST' : (6350, 5600, 1800, 24900, 6500, 4300),

		 # operating basic pose, taken when system is ready
		'POSE_READY_NEUTRAL': (6350, -8500, -7500, 27300, 6500, None),
		},

  'blender' :   {	# Purely virtual character
                'AXIS_LIMITS' : {
                        '51.5' : (-15*0.01745, 15*0.01745),
                        '53.5' : (-22*0.01745, 25*0.01745),
                        '55.5' : (-15*0.01745, 15*0.01745),
                        'TX'   : (-20*0.01745, 30*0.01745),
                        'TY'   : (-17*0.01745, 15*0.01745),
                        'TZ'   : (-15*0.01745, 15*0.01745),
                        'SY'   : (-17*0.01745, 15*0.01745),
                        'SZ'   : (-17*0.01745, 15*0.01745)
                        }
                    }
}
